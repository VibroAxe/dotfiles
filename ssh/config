Host *
    HashKnownHosts no
	ForwardAgent no

host virt-*
	user root
host lancache
	user root

host core core.tnnt.co.uk
	ForwardAgent no
	ControlMaster auto
	ControlPersist 10m
	Controlpath ~/.ssh/sock/ssh-%r@%h:%p.sock

host web.macrolevel.co.uk www.macrolevel.co.uk web www
	HostName www.macrolevel.co.uk
	ForwardAgent yes

host git.macrolevel.co.uk
	HostName git.macrolevel.co.uk
	ForwardAgent yes

host smarthome.tnnt.co.uk
  ForwardAgent Yes
  LocalForward 8080 localhost:8080
  HostName smarthome.tnnt.co.uk
  ProxyCommand ssh -W %h:%p core.tnnt.co.uk

host lanager.tnnt.co.uk
  ForwardAgent Yes
  HostName lanager.tnnt.co.uk
# this is the better way to do it but is not suppoorted in all places
#  ProxyJump core.tnnt.co.uk
  ProxyCommand ssh -W %h:%p core.tnnt.co.uk

Host *+*
  ProxyCommand ssh $(echo %h | sed 's/+[^+]*$//;s/\([^+%%]*\)%%\([^+]*\)$/\2 -l \1/;s/:/ -p /') exec nc -w1 $(echo %h | sed 's/^.*+//;/:/!s/$/ %p/;s/:/ /')
